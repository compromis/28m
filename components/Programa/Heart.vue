<script setup>
const props = defineProps({
  progress: {
    type: Number,
    default: 0
  },
  max: {
    type: Number,
    default: 15
  }
})

const progressPercent = computed(() => {
  return props.progress === 0 ? 0 : props.progress < props.max ? (props.progress * 60 / props.max) + 20 : 80
})
</script>

<template>
  <svg id="HeartIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 566.93 485.78">
    <defs>
      <clipPath id="clippath">
        <path id="Mask" class="cls-1" d="m504.73,155.33v3.64c0,31.47-13.14,61.62-36.22,83.04l-193.48,179.67L81.55,242.02c-23.08-21.42-36.22-51.57-36.22-83.04v-3.64c0-52.34,37.1-97.18,88.57-107.01,37.55-7.18,76.09,5.85,101.6,34.45l.11.11,19.66,22.09c.33.44.66.88,1.1,1.21v.11c4.97,4.97,11.71,7.73,18.66,7.73s13.69-2.76,18.66-7.73c.33-.44.77-.77,1.1-1.21l19.66-22.09.11-.11.11-.11c25.4-28.49,64.05-41.63,101.6-34.45,51.35,9.83,88.46,54.77,88.46,107.01Z"/>
      </clipPath>
    </defs>
    <path id="Heart" class="cls-3" d="m242.84,457.47l-2.69-2.47L51.73,280.02C18.71,249.37,0,206.36,0,161.29v-3.55C0,82.03,53.77,17.08,128.19,2.88c42.37-8.17,85.71,1.61,120.24,25.92,9.68,6.88,18.71,14.84,26.89,23.98,4.52-5.16,9.36-9.89,14.52-14.3,3.98-3.44,8.07-6.67,12.37-9.68h0C336.72,4.49,380.07-5.29,422.44,2.77c74.42,14.2,128.19,79.26,128.19,154.97v3.55c0,45.06-18.71,88.08-51.73,118.73l-188.42,174.98-2.69,2.47c-8.82,8.17-20.43,12.8-32.48,12.8s-23.66-4.52-32.48-12.8h0Zm14.3-347.59c-.43-.32-.75-.75-1.08-1.18l-19.14-21.51-.11-.11h0c-24.84-27.85-62.38-40.54-98.94-33.55-50.12,9.57-86.25,53.23-86.25,104.21v3.55c0,30.65,12.8,60.01,35.27,80.87l188.42,174.98,188.42-174.98c22.48-20.86,35.27-50.22,35.27-80.87v-3.55c0-50.87-36.14-94.64-86.14-104.21-36.57-6.99-74.21,5.81-98.94,33.55l-.11.11-.11.11-19.14,21.51c-.32.43-.75.75-1.08,1.18-4.84,4.84-11.4,7.53-18.18,7.53s-13.34-2.69-18.18-7.53v-.11Z"/>
    <g id="Fill">
      <g class="cls-2">
        <rect id="Square" class="cls-3" x="34.33" y="421.69" width="483.98" height="383.18" :style="{ transform: `translateY(-${progressPercent}%)` }"/>
      </g>
    </g>
    <g id="Face">
      <path class="cls-4" d="m195.66,248.24c15.07,16.26,40.86,33.62,77.75,33.62s62.67-17.35,77.75-33.62c8.92-9.62,24-10.31,33.62-1.39,9.62,8.92,10.31,24,1.39,33.62-21.82,23.6-59.5,48.99-112.65,48.99s-90.94-25.29-112.65-48.99c-8.92-9.62-8.33-24.69,1.39-33.62,9.72-8.92,24.69-8.33,33.62,1.39h-.2Z"/>
      <circle class="cls-4" cx="194.47" cy="139.06" r="31.73"/>
      <path class="cls-4" d="m327.15,160.58c-7.54,8.03-20.03,8.43-28.06.89-8.03-7.54-8.43-20.03-.89-28.06,14.38-15.37,34.91-22.11,54.14-22.11s39.77,6.74,54.14,22.11c7.54,8.03,7.04,20.53-.89,28.06-7.93,7.54-20.53,7.04-28.06-.89-5.45-5.75-14.68-9.62-25.19-9.62s-19.73,3.77-25.19,9.62h0Z"/>
    </g>
  </svg>
</template>

<style lang="scss" scoped>
.cls-1 {
  fill: none;
}

.cls-2 {
  clip-path: url(#clippath);
}

.cls-3 {
  fill: currentColor;
}

.cls-4 {
  fill: #fff;
}

#Square {
  transition: transform .25s ease;
}
</style>